<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.nff.repository.dao.ReviewDAO">

<select id="selectReview" resultType="Review">
	select u.nick_name, s.store_name, r.review_content, r.reg_date, 
    (select count(*) from tb_like l where l.store_review_no = r.review_no) 
		from tb_user u, tb_review r, tb_store s
	where r.user_no = u.user_no
	and r.store_no = s.store_no
	order by r.review_no desc;
</select>

<!-- 
<select id="countLike" parameterType="int" resultType="int">
	select count(*) as likeCount
		from tb_like l
		left join tb_review r 
		on l.store_review_no = r.review_no
	where l.store_review_no = #{reviewNo}
</select>
-->
</mapper>